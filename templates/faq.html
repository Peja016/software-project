{% extends "base.html" %}
{% block title %}Frequently Asked Questions - Dublin Bike Share{% endblock %}
{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/faq.css') }}">
{% endblock %}
{% block content %}
{% import "components/faq_comp.html" as faq_module %}
    <section class="faq-section">
        <div class="container">
            <h1 class="section-title">Frequently Asked Questions</h1>
            
            <p style="text-align: center;">Find answers to the most common questions about Dublin Bike Share. If you can't find what you're looking for, feel free to <a href="{{ url_for('contact') }}">contact us</a>.</p>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="faqSearch" placeholder="Search for a question...">
                    <button id="searchBtn">Search</button>
                </div>
            </div>
            
            <div class="faq-categories">
                {{ faq_module.render_category_buttons([
                    {'id': 'all', 'name': 'All Questions', 'active': true},
                    {'id': 'subscription', 'name': 'Subscriptions', 'active': false},
                    {'id': 'usage', 'name': 'Using the Service', 'active': false},
                    {'id': 'payment', 'name': 'Payment & Charges', 'active': false},
                    {'id': 'technical', 'name': 'Technical Issues', 'active': false}
                ]) }}
            </div>
            
            <div class="faq-container">
                {{ faq_module.render_faq_category([
                    {
                        'id': 'subscription',
                        'title': 'Subscription & Membership',
                        'items': [
                            {
                                'question': 'What subscription options are available?',
                                'answer': '<p>Dublin Bike Share offers three main subscription options:</p><ul><li><strong>Annual Subscription (€35):</strong> Unlimited 30-minute journeys for a full year. Perfect for regular users.</li><li><strong>3-Day Pass (€5):</strong> Unlimited 30-minute journeys over three consecutive days. Ideal for visitors.</li><li><strong>Pay-As-You-Go:</strong> €2 unlock fee plus €0.50 for each 30 minutes of use. No commitment required.</li></ul>'
                            },
                            {
                                'question': 'How do I sign up for a subscription?',
                                'answer': '<p>You can sign up for a Dublin Bike Share subscription in several ways:</p><ul><li>Online through our website by creating an account and selecting your preferred plan</li><li>Through our mobile app, available for iOS and Android devices</li><li>At any service kiosk at major Dublin Bike Share stations</li><li>By calling our customer service at +353 1 716 7777</li></ul><p>You\'ll need a valid credit or debit card and an email address to complete your registration.</p>'
                            },
                            {
                                'question': 'Can I cancel my subscription?',
                                'answer': '<p>Yes, you can cancel your subscription at any time. Annual subscriptions are non-refundable but will remain active until their expiration date. To cancel auto-renewal:</p><ol><li style="margin-bottom: 8px;">Log in to your account on our website or app</li><li style="margin-bottom: 8px;">Go to \'My Subscription\' in your account settings</li><li style="margin-bottom: 8px;">Select \'Cancel Auto-Renewal\'</li></ol><p>For 3-Day Passes, these automatically expire after the 3-day period without any further action needed.</p>'
                            },
                            {
                                'question': 'Can multiple people use one subscription?',
                                'answer': '<p>No, subscriptions are individual and non-transferable. Each person who wishes to use Dublin Bike Share must have their own subscription or pass. However, we do offer discounted rates for organizations, universities, and businesses looking to provide access for their members or employees.</p>'
                            }
                        ]
                    },
                    {
                        'id': 'usage',
                        'title': 'Using the Service',
                        'items': [
                            {
                                'question': 'How do I unlock a bike?',
                                'answer': '<p>There are two main ways to unlock a Dublin Bike Share bicycle:</p><p><strong>Mobile App Method:</strong></p><ol style="padding-left: 25px; margin: 10px 0;"><li style="margin-bottom: 8px;">Open the Dublin Bike Share app on your smartphone</li><li style="margin-bottom: 8px;">Locate the station on the map or scan the QR code on the bike</li><li style="margin-bottom: 8px;">Select the bike number you wish to use</li><li style="margin-bottom: 8px;">Confirm your selection and the bike will unlock automatically</li></ol><p><strong>Subscriber Card Method:</strong></p><ol style="padding-left: 25px; margin: 10px 0;"><li style="margin-bottom: 8px;">Insert your Dublin Bike Share card into the card reader at the station kiosk</li><li style="margin-bottom: 8px;">Enter your PIN when prompted</li><li style="margin-bottom: 8px;">Select a bike number from the available options</li><li style="margin-bottom: 8px;">Remove your card and go to the selected bike, which will be unlocked and ready to use</li></ol>'
                            },
                            {
                                'question': 'How long can I keep a bike?',
                                'answer': '<p>With an Annual Subscription or 3-Day Pass, you can take unlimited rides of up to 30 minutes each at no additional cost. For rides longer than 30 minutes, the following charges apply:</p><ul><li>30-60 minutes: €0.50</li><li>60-90 minutes: €1.50</li><li>Each additional 30 minutes: €2.00</li></ul><p>For Pay-As-You-Go users, charges begin from the moment you unlock the bike at a rate of €0.50 per 30 minutes, plus the initial €2 unlock fee.</p><p>While there is no absolute maximum time limit, bikes are intended for short trips. For extended use, we recommend returning your bike and checking out a new one to avoid additional charges.</p>'
                            },
                            {
                                'question': 'What if there are no available bikes or docks?',
                                'answer': '<p>If you encounter a station with no available bikes or docking spaces:</p><p><strong>No Available Bikes:</strong></p><ul><li>Check our app or website for the nearest station with available bikes</li><li>The app shows real-time availability of bikes at all stations</li><li>Stations are typically located within a 5-minute walk of each other in the city center</li></ul><p><strong>No Available Docks:</strong></p><ul><li>Use the app to find the nearest station with available docking spaces</li><li>If you encounter a full station, you can request a 15-minute extension through the app or by calling customer service to give you time to reach another station</li><li>Annual members can report full stations for service improvements</li></ul>'
                            },
                            {
                                'question': 'What happens if the bike gets damaged while I\'m using it?',
                                'answer': '<p>If a bike becomes damaged during your journey:</p><ol style="padding-left: 25px; margin: 10px 0;"><li style="margin-bottom: 8px;">If the damage is minor and doesn\'t affect safety, return the bike to any station as normal</li><li style="margin-bottom: 8px;">Report the issue through the app or website by entering the bike number and describing the problem</li><li style="margin-bottom: 8px;">If the bike is unsafe to ride, lock it securely and report its location and condition to our customer service immediately</li></ol><p>Users are responsible for damages caused by misuse, negligence, or violations of our terms of service. For normal wear and tear or mechanical failures not caused by the user, there is no charge. Each case is evaluated individually, and we may contact you for additional information.</p>'
                            }
                        ]
                    },
                    {
                        'id': 'payment',
                        'title': 'Payment & Charges',
                        'items': [
                            {
                                'question': 'What payment methods do you accept?',
                                'answer': '<p>Dublin Bike Share accepts the following payment methods:</p><ul><li>Credit cards (Visa, Mastercard, American Express)</li><li>Debit cards (with Visa or Mastercard functionality)</li><li>Digital wallets (Apple Pay, Google Pay)</li><li>Bank transfers (for annual subscriptions only)</li></ul><p>We do not accept cash payments for security reasons. All payment information is encrypted and securely stored in compliance with financial regulations.</p>'
                            },
                            {
                                'question': 'What is the security deposit and when is it refunded?',
                                'answer': '<p>Dublin Bike Share requires a temporary authorization hold of €150 on your card when you sign up for a 3-Day Pass or use the Pay-As-You-Go option. This is not a charge but a temporary hold that is typically released within 7 days after your last ride, provided the bike is returned in good condition.</p><p>Annual members do not have a security deposit hold but agree to terms that allow charges for damages or non-return of bikes.</p><p>If your deposit hold has not been released after 7 days of your final ride, please contact our customer service for assistance.</p>'
                            }
                        ]
                    },
                    {
                        'id': 'technical',
                        'title': 'Technical Issues',
                        'items': [
                            {
                                'question': "What if the docking station is not working?",
                                'answer': "
                                    <p>If you encounter issues with a docking station:</p>
                                    <p><strong>When Returning a Bike:</strong></p>
                                    <ul>
                                        <li>Ensure you're pushing the bike firmly into the dock – you should hear a beep and see a green light when successfully docked</li>
                                        <li>Try another docking point at the same station</li>
                                        <li>If all docking points seem to be malfunctioning, find the nearest alternative station through the app</li>
                                        <li>If unable to dock due to technical issues, call customer service immediately</li>
                                    </ul>
                                    <p><strong>When Taking a Bike:</strong></p>
                                    <ul>
                                        <li>If the terminal is unresponsive, try using the mobile app instead</li>
                                        <li>If neither works, find the nearest operational station on the app map</li>
                                    </ul>
                                    <p>Always report malfunctioning docking stations through the app or by calling customer service to help us maintain the system.</p>
                                "
                            }
                        ]
                    }
                    
                ]) 
                }}
            </div>
            
            <div class="no-results" id="noResults">
                <h3>No results found</h3>
                <p>Try different keywords or browse the categories above.</p>
            </div>
            <div class="contact-cta">
                <h3>Couldn't Find Your Answer?</h3>
                <p>Our customer service team is ready to assist you with any specific questions about Dublin Bike Share.</p>
                <a href="{{ url_for('contact') }}" class="btn btn-primary">Contact Us</a>
            </div>
        </div>
    </section>
    
    <script>
        
        // FAQ functionality
        document.addEventListener('DOMContentLoaded', function() {
            const faqQuestions = document.querySelectorAll('.faq-question');
            const categoryButtons = document.querySelectorAll('.category-btn');
            const searchBtn = document.getElementById('searchBtn');
            const searchInput = document.getElementById('faqSearch');
            const noResults = document.getElementById('noResults');
            const faqCategories = document.querySelectorAll('.faq-category');
            
            // Toggle FAQ answers
            faqQuestions.forEach(question => {
                question.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const answer = this.nextElementSibling;
                    
                    if (this.classList.contains('active')) {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                    } else {
                        answer.style.maxHeight = 0;
                    }
                });
            });
            
            // Filter by category
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const category = this.getAttribute('data-category');
                    
                    // Show/hide categories based on selection
                    if (category === 'all') {
                        faqCategories.forEach(cat => cat.style.display = 'block');
                    } else {
                        faqCategories.forEach(cat => {
                            if (cat.id === category) {
                                cat.style.display = 'block';
                            } else {
                                cat.style.display = 'none';
                            }
                        });
                    }
                    
                    // Reset search
                    searchInput.value = '';
                    noResults.style.display = 'none';
                    
                    // Reset question visibility
                    faqQuestions.forEach(q => {
                        q.parentElement.style.display = 'block';
                        q.classList.remove('active');
                        q.nextElementSibling.style.maxHeight = 0;
                    });
                });
            });
            
            // Search functionality
            function performSearch() {
                const searchTerm = searchInput.value.toLowerCase();
                let resultsFound = false;
                
                if (searchTerm.length < 2) {
                    // Show all questions if search term is too short
                    faqQuestions.forEach(q => q.parentElement.style.display = 'block');
                    faqCategories.forEach(cat => cat.style.display = 'block');
                    noResults.style.display = 'none';
                    return;
                }
                
                // Set all category buttons to inactive except "All"
                categoryButtons.forEach(btn => {
                    if (btn.getAttribute('data-category') === 'all') {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
                
                // Show all categories
                faqCategories.forEach(cat => cat.style.display = 'block');
                
                // Filter questions
                faqQuestions.forEach(question => {
                    const questionText = question.textContent.toLowerCase();
                    const answerText = question.nextElementSibling.textContent.toLowerCase();
                    
                    if (questionText.includes(searchTerm) || answerText.includes(searchTerm)) {
                        question.parentElement.style.display = 'block';
                        resultsFound = true;
                    } else {
                        question.parentElement.style.display = 'none';
                    }
                });
                
                // Check for empty categories
                faqCategories.forEach(category => {
                    const visibleQuestions = category.querySelectorAll('.faq-item[style*="display: block"]');
                    if (visibleQuestions.length === 0) {
                        category.style.display = 'none';
                    }
                });
                
                // Show no results message if needed
                noResults.style.display = resultsFound ? 'none' : 'block';
            }
            
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        });
    </script>
{% endblock %}
